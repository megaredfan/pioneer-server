package cn.litgame.wargame.robot.strategy;

import org.springframework.stereotype.Service;

import cn.litgame.wargame.core.auto.GameProtos.CSLogin;
import cn.litgame.wargame.core.auto.GameProtos.CSPayment;
import cn.litgame.wargame.core.auto.GameProtos.MessageBody;
import cn.litgame.wargame.core.auto.GameGlobalProtos.MessageCode;
import cn.litgame.wargame.core.auto.GameGlobalProtos.MessageType;
import cn.litgame.wargame.robot.core.Robot;
import cn.litgame.wargame.robot.core.TestGameFactory;

import com.google.protobuf.ByteString;

@Service
public class PaymentTest extends TestGameFactory implements Runnable{

	Robot robot;
	
	public PaymentTest(Robot robot) {
		super();
		this.robot = robot;
	}

	public PaymentTest() {
		super();
	}

	public Robot getRobot() {
		return robot;
	}

	public void setRobot(Robot robot) {
		this.robot = robot;
	}
	
	@Override
	public void run() {
		try {
			MessageBody.Builder body = MessageBody.newBuilder();
			body.setMessageType(MessageType.MSG_ID_PAYMENT);
			body.setMessageCode(MessageCode.OK);
			
			//String str = "{\"pod\"=\"10\";\"purchase-info\"=\"eyJhcHAtaXRlbS1pZCI9Ijg2MzAzMDAzNSI7ImJ2cnMiPSIyLjAuMCI7InB1cmNoYXNlLWRhdGUiPSIyMDE0LTA5LTAzIDEyOjQ0OjEwIEV0Yy9HTVQiOyJxdWFudGl0eSI9IjEiOyJiaWQiPSJjb20uZWEucHJvZHVjdC5mYW5na3VhaXNhbmd1byI7InZlcnNpb24tZXh0ZXJuYWwtaWRlbnRpZmllciI9IjY1Nzg0MjY3OSI7InB1cmNoYXNlLWRhdGUtcHN0Ij0iMjAxNC0wOS0wMyAwNTo0NDoxMCBBbWVyaWNhL0xvc19BbmdlbGVzIjsicHVyY2hhc2UtZGF0ZS1tcyI9IjE0MDk3NDgyNTAyNjYiOyJpdGVtLWlkIj0iODc5NDMxMzIwIjsib3JpZ2luYWwtdHJhbnNhY3Rpb24taWQiPSI0NzQzNjk5NzIwNzE4ODQ2NTc2Ijsib3JpZ2luYWwtcHVyY2hhc2UtZGF0ZS1tcyI9IjE0MDk3NDgyNTAyNjYiOyJvcmlnaW5hbC1wdXJjaGFzZS1kYXRlLXBzdCI9IjIwMTQtMDktMDMgMDU6NDQ6MTAgQW1lcmljYS9Mb3NfQW5nZWxlcyI7InByb2R1Y3QtaWQiPSJma3NnXzMwcm1iXzMzMGdvbGQiOyJ0cmFuc2FjdGlvbi1pZCI9IjQ3NDM2OTk3MjA3MTg4NDY1NzYiOyJvcmlnaW5hbC1wdXJjaGFzZS1kYXRlIj0iMjAxNC0wOS0wMyAxMjo0NDoxMCBFdGMvR01UIjsidW5pcXVlLWlkZW50aWZpZXIiPSIwZWM4NTUyMjhkNTE2YTljMDUzNDEwNDI3YzUxODNkOThjNjQyNTc4Ijt9\";\"signature\"=\"ApdxJdtNwPU2rA5/cn3kIO1OTk25feDKa0aagyyRveWlcFlglv6RF6znkiBS3um9Uc7pVob+PqZR2T8wyVrHNplof3DX3IqDOlWq+90a7Yl+qrR7A7jWwviw708PS+67PyHRnhO/G7bVqgRpEr6EuFybiU1FXAiXJc6ls1YAssQxAAADVzCCA1MwggI7oAMCAQICCGUUkU3ZWAS1MA0GCSqGSIb3DQEBBQUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQKDApBcHBsZSBJbmMuMSYwJAYDVQQLDB1BcHBsZSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTEzMDEGA1UEAwwqQXBwbGUgaVR1bmVzIFN0b3JlIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTA5MDYxNTIyMDU1NloXDTE0MDYxNDIyMDU1NlowZDEjMCEGA1UEAwwaUHVyY2hhc2VSZWNlaXB0Q2VydGlmaWNhdGUxGzAZBgNVBAsMEkFwcGxlIGlUdW5lcyBTdG9yZTETMBEGA1UECgwKQXBwbGUgSW5jLjELMAkGA1UEBhMCVVMwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMrRjF2ct4IrSdiTChaI0g8pwv/cmHs8p/RwV/rt/91XKVhNl4XIBimKjQQNfgHsDs6yju++DrKJE7uKsphMddKYfFE5rGXsAdBEjBwRIxexTevx3HLEFGAt1moKx509dhxtiIdDgJv2YaVs49B0uJvNdy6SMqNNLHsDLzDS9oZHAgMBAAGjcjBwMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAUNh3o4p2C0gEYtTJrDtdDC5FYQzowDgYDVR0PAQH/BAQDAgeAMB0GA1UdDgQWBBSpg4PyGUjFPhJXCBTMzaN+mV8k9TAQBgoqhkiG92NkBgUBBAIFADANBgkqhkiG9w0BAQUFAAOCAQEAEaSbPjtmN4C/IB3QEpK32RxacCDXdVXAeVReS5FaZxc+t88pQP93BiAxvdW/3eTSMGY5FbeAYL3etqP5gm8wrFojX0ikyVRStQ+/AQ0KEjtqB07kLs9QUe8czR8UGfdM1EumV/UgvDd4NwNYxLQMg4WTQfgkQQVy8GXZwVHgbE/UC6Y7053pGXBk51NPM3woxhd3gSRLvXj+loHsStcTEqe9pBDpmG5+sk4tw+GK3GMeEN5/+e1QT9np/Kl1nj+aBw7C0xsy0bFnaAd1cSS6xdory/CUvM6gtKsmnOOdqTesbp0bs8sn6Wqs0C9dgcxRHuOMZ2tm8npLUm7argOSzQ==\";\"signing-status\"=\"0\";}";
			CSPayment.Builder csPayment = CSPayment.newBuilder();
			String str = "{\"signature\" = \"AnU9NtzjbLsGbyHNZposOTcxf4nELKmWo629fB7i8x68lA/63MUbZJB0smv52yGavpjwKxQ3nFG1dRiwQ67wN/b0poO987FwvbgcMifbO6oOahRCmAEEQLNOcY9B5OONJrhowyilbNu9QsZ8CFk9eI6LSDzGH54OYV8HpnGX9h/3AAADVzCCA1MwggI7oAMCAQICCBup4+PAhm/LMA0GCSqGSIb3DQEBBQUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQKDApBcHBsZSBJbmMuMSYwJAYDVQQLDB1BcHBsZSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTEzMDEGA1UEAwwqQXBwbGUgaVR1bmVzIFN0b3JlIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTE0MDYwNzAwMDIyMVoXDTE2MDUxODE4MzEzMFowZDEjMCEGA1UEAwwaUHVyY2hhc2VSZWNlaXB0Q2VydGlmaWNhdGUxGzAZBgNVBAsMEkFwcGxlIGlUdW5lcyBTdG9yZTETMBEGA1UECgwKQXBwbGUgSW5jLjELMAkGA1UEBhMCVVMwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMmTEuLgjimLwRJxy1oEf0esUNDVEIe6wDsnnal14hNBt1v195X6n93YO7gi3orPSux9D554SkMp+Sayg84lTc362UtmYLpWnb34nqyGx9KBVTy5OGV4ljE1OwC+oTnRM+QLRCmeNxMbPZhS47T+eZtDEhVB9usk3+JM2Cogfwo7AgMBAAGjcjBwMB0GA1UdDgQWBBSJaEeNuq9Df6ZfN68Fe+I2u22ssDAMBgNVHRMBAf8EAjAAMB8GA1UdIwQYMBaAFDYd6OKdgtIBGLUyaw7XQwuRWEM6MA4GA1UdDwEB/wQEAwIHgDAQBgoqhkiG92NkBgUBBAIFADANBgkqhkiG9w0BAQUFAAOCAQEAeaJV2U51rxfcqAAe5C2/fEW8KUl4iO4lMuta7N6XzP1pZIz1NkkCtIIweyNj5URYHK+HjRKSU9RLguNl0nkfxqObiMckwRudKSq69NInrZyCD66R4K77nb9lMTABSSYlsKt8oNtlhgR/1kjSSRQcHktsDcSiQGKMdkSlp4AyXf7vnHPBe4yCwYV2PpSN04kboiJ3pBlxsGwV/ZlL26M2ueYHKYCuXhdqFwxVgm52h3oeJOOt/vY4EcQq7eqHm6m03Z9b7PRzYM2KGXHDmOMk7vDpeMVlLDPSGYz1+U3sDxJzebSpbaJmT7imzUKfggEY7xxf4czfH0yj5wNzSGTOvQ==\";\"purchase-info\" = \"ewoJIm9yaWdpbmFsLXB1cmNoYXNlLWRhdGUtcHN0IiA9ICIyMDE0LTA5LTAzIDA0OjE1OjM3IEFtZXJpY2EvTG9zX0FuZ2VsZXMiOwoJInB1cmNoYXNlLWRhdGUtbXMiID0gIjE0MDk3NDI5Mzc5NTciOwoJInVuaXF1ZS1pZGVudGlmaWVyIiA9ICIyYmQ0MzkxNTE4MDcwNzU3M2MxMTQ3ZGViZDIzODE5NmI4NDUzNDE5IjsKCSJvcmlnaW5hbC10cmFuc2FjdGlvbi1pZCIgPSAiNDkwMDAwMDY0NjExNzI4IjsKCSJidnJzIiA9ICIyLjAuMCI7CgkiYXBwLWl0ZW0taWQiID0gIjg2MzAzMDAzNSI7CgkidHJhbnNhY3Rpb24taWQiID0gIjQ5MDAwMDA2NDYxMTcyOCI7CgkicXVhbnRpdHkiID0gIjEiOwoJIm9yaWdpbmFsLXB1cmNoYXNlLWRhdGUtbXMiID0gIjE0MDk3NDI5Mzc5NTciOwoJInVuaXF1ZS12ZW5kb3ItaWRlbnRpZmllciIgPSAiMTVDMDZFNzQtOUUwRS00NUQ0LTg2MzQtQjU1NUU4NTJEQ0E0IjsKCSJpdGVtLWlkIiA9ICI4Nzk0MzEzMjAiOwoJInZlcnNpb24tZXh0ZXJuYWwtaWRlbnRpZmllciIgPSAiNjU3ODQyNjc5IjsKCSJwcm9kdWN0LWlkIiA9ICJma3NnXzMwcm1iXzMzMGdvbGQiOwoJInB1cmNoYXNlLWRhdGUiID0gIjIwMTQtMDktMDMgMTE6MTU6MzcgRXRjL0dNVCI7Cgkib3JpZ2luYWwtcHVyY2hhc2UtZGF0ZSIgPSAiMjAxNC0wOS0wMyAxMToxNTozNyBFdGMvR01UIjsKCSJiaWQiID0gImNvbS5lYS5wcm9kdWN0LmZhbmdrdWFpc2FuZ3VvIjsKCSJwdXJjaGFzZS1kYXRlLXBzdCIgPSAiMjAxNC0wOS0wMyAwNDoxNTozNyBBbWVyaWNhL0xvc19BbmdlbGVzIjsKfQ==\";\"pod\" = \"49\";\"signing-status\" = \"0\";}";
			//String str ="{\n\t\"signature\" = \"ApdxJdtNwPU2rA5/cn3kIO1OTk25feDKa0aagyyRveWlcFlglv6RF6znkiBS3um9Uc7pVob+PqZR2T8wyVrHNplof3DX3IqDOlWq+90a7Yl+qrR7A7jWwviw708PS+67PyHRnhO/G7bVqgRpEr6EuFybiU1FXAiXJc6ls1YAssQxAAADVzCCA1MwggI7oAMCAQICCGUUkU3ZWAS1MA0GCSqGSIb3DQEBBQUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQKDApBcHBsZSBJbmMuMSYwJAYDVQQLDB1BcHBsZSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTEzMDEGA1UEAwwqQXBwbGUgaVR1bmVzIFN0b3JlIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTA5MDYxNTIyMDU1NloXDTE0MDYxNDIyMDU1NlowZDEjMCEGA1UEAwwaUHVyY2hhc2VSZWNlaXB0Q2VydGlmaWNhdGUxGzAZBgNVBAsMEkFwcGxlIGlUdW5lcyBTdG9yZTETMBEGA1UECgwKQXBwbGUgSW5jLjELMAkGA1UEBhMCVVMwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMrRjF2ct4IrSdiTChaI0g8pwv/cmHs8p/RwV/rt/91XKVhNl4XIBimKjQQNfgHsDs6yju++DrKJE7uKsphMddKYfFE5rGXsAdBEjBwRIxexTevx3HLEFGAt1moKx509dhxtiIdDgJv2YaVs49B0uJvNdy6SMqNNLHsDLzDS9oZHAgMBAAGjcjBwMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAUNh3o4p2C0gEYtTJrDtdDC5FYQzowDgYDVR0PAQH/BAQDAgeAMB0GA1UdDgQWBBSpg4PyGUjFPhJXCBTMzaN+mV8k9TAQBgoqhkiG92NkBgUBBAIFADANBgkqhkiG9w0BAQUFAAOCAQEAEaSbPjtmN4C/IB3QEpK32RxacCDXdVXAeVReS5FaZxc+t88pQP93BiAxvdW/3eTSMGY5FbeAYL3etqP5gm8wrFojX0ikyVRStQ+/AQ0KEjtqB07kLs9QUe8czR8UGfdM1EumV/UgvDd4NwNYxLQMg4WTQfgkQQVy8GXZwVHgbE/UC6Y7053pGXBk51NPM3woxhd3gSRLvXj+loHsStcTEqe9pBDpmG5+sk4tw+GK3GMeEN5/+e1QT9np/Kl1nj+aBw7C0xsy0bFnaAd1cSS6xdory/CUvM6gtKsmnOOdqTesbp0bs8sn6Wqs0C9dgcxRHuOMZ2tm8npLUm7argOSzQ==\";\n\t\"purchase-info\" = \"ewoJIm9yaWdpbmFsLXB1cmNoYXNlLWRhdGUtcHN0IiA9ICIyMDEyLTA3LTEyIDA1OjU0OjM1IEFtZXJpY2EvTG9zX0FuZ2VsZXMiOwoJInB1cmNoYXNlLWRhdGUtbXMiID0gIjEzNDIwOTc2NzU4ODIiOwoJIm9yaWdpbmFsLXRyYW5zYWN0aW9uLWlkIiA9ICIxNzAwMDAwMjk0NDk0MjAiOwoJImJ2cnMiID0gIjEuNCI7CgkiYXBwLWl0ZW0taWQiID0gIjQ1MDU0MjIzMyI7CgkidHJhbnNhY3Rpb24taWQiID0gIjE3MDAwMDAyOTQ0OTQyMCI7CgkicXVhbnRpdHkiID0gIjEiOwoJIm9yaWdpbmFsLXB1cmNoYXNlLWRhdGUtbXMiID0gIjEzNDIwOTc2NzU4ODIiOwoJIml0ZW0taWQiID0gIjUzNDE4NTA0MiI7CgkidmVyc2lvbi1leHRlcm5hbC1pZGVudGlmaWVyIiA9ICI5MDUxMjM2IjsKCSJwcm9kdWN0LWlkIiA9ICJjb20uemVwdG9sYWIuY3RyYm9udXMuc3VwZXJwb3dlcjEiOwoJInB1cmNoYXNlLWRhdGUiID0gIjIwMTItMDctMTIgMTI6NTQ6MzUgRXRjL0dNVCI7Cgkib3JpZ2luYWwtcHVyY2hhc2UtZGF0ZSIgPSAiMjAxMi0wNy0xMiAxMjo1NDozNSBFdGMvR01UIjsKCSJiaWQiID0gImNvbS56ZXB0b2xhYi5jdHJleHBlcmltZW50cyI7CgkicHVyY2hhc2UtZGF0ZS1wc3QiID0gIjIwMTItMDctMTIgMDU6NTQ6MzUgQW1lcmljYS9Mb3NfQW5nZWxlcyI7Cn0=\";\n\t\"pod\" = \"17\";\n\t\"signing-status\" = \"0\";\n}";
			StringBuilder sb = new StringBuilder();
			for(int i=0 ;i< 10 * 1024;i++){
				sb.append("a");
			}
			csPayment.setProductId("fksg_30rmb_330gold");
			csPayment.setReceipt(ByteString.copyFrom(sb.toString().getBytes()));
			//csPayment.setReceipt(ByteString.copyFrom(str.getBytes("UTF-8")));
			csPayment.setOrderId("490000064611728");
			body.setCsPayment(csPayment);
			this.send(body.build().toByteArray(),robot);

			
		} catch (Exception e) {
			e.printStackTrace();
		}
		
	}
	public static void main(String[] args) {
		String str = "{\"signature\" = \"AnU9NtzjbLsGbyHNZposOTcxf4nELKmWo629fB7i8x68lA/63MUbZJB0smv52yGavpjwKxQ3nFG1dRiwQ67wN/b0poO987FwvbgcMifbO6oOahRCmAEEQLNOcY9B5OONJrhowyilbNu9QsZ8CFk9eI6LSDzGH54OYV8HpnGX9h/3AAADVzCCA1MwggI7oAMCAQICCBup4+PAhm/LMA0GCSqGSIb3DQEBBQUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQKDApBcHBsZSBJbmMuMSYwJAYDVQQLDB1BcHBsZSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTEzMDEGA1UEAwwqQXBwbGUgaVR1bmVzIFN0b3JlIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTE0MDYwNzAwMDIyMVoXDTE2MDUxODE4MzEzMFowZDEjMCEGA1UEAwwaUHVyY2hhc2VSZWNlaXB0Q2VydGlmaWNhdGUxGzAZBgNVBAsMEkFwcGxlIGlUdW5lcyBTdG9yZTETMBEGA1UECgwKQXBwbGUgSW5jLjELMAkGA1UEBhMCVVMwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMmTEuLgjimLwRJxy1oEf0esUNDVEIe6wDsnnal14hNBt1v195X6n93YO7gi3orPSux9D554SkMp+Sayg84lTc362UtmYLpWnb34nqyGx9KBVTy5OGV4ljE1OwC+oTnRM+QLRCmeNxMbPZhS47T+eZtDEhVB9usk3+JM2Cogfwo7AgMBAAGjcjBwMB0GA1UdDgQWBBSJaEeNuq9Df6ZfN68Fe+I2u22ssDAMBgNVHRMBAf8EAjAAMB8GA1UdIwQYMBaAFDYd6OKdgtIBGLUyaw7XQwuRWEM6MA4GA1UdDwEB/wQEAwIHgDAQBgoqhkiG92NkBgUBBAIFADANBgkqhkiG9w0BAQUFAAOCAQEAeaJV2U51rxfcqAAe5C2/fEW8KUl4iO4lMuta7N6XzP1pZIz1NkkCtIIweyNj5URYHK+HjRKSU9RLguNl0nkfxqObiMckwRudKSq69NInrZyCD66R4K77nb9lMTABSSYlsKt8oNtlhgR/1kjSSRQcHktsDcSiQGKMdkSlp4AyXf7vnHPBe4yCwYV2PpSN04kboiJ3pBlxsGwV/ZlL26M2ueYHKYCuXhdqFwxVgm52h3oeJOOt/vY4EcQq7eqHm6m03Z9b7PRzYM2KGXHDmOMk7vDpeMVlLDPSGYz1+U3sDxJzebSpbaJmT7imzUKfggEY7xxf4czfH0yj5wNzSGTOvQ==\";\"purchase-info\" = \"ewoJIm9yaWdpbmFsLXB1cmNoYXNlLWRhdGUtcHN0IiA9ICIyMDE0LTA5LTAzIDA0OjE1OjM3IEFtZXJpY2EvTG9zX0FuZ2VsZXMiOwoJInB1cmNoYXNlLWRhdGUtbXMiID0gIjE0MDk3NDI5Mzc5NTciOwoJInVuaXF1ZS1pZGVudGlmaWVyIiA9ICIyYmQ0MzkxNTE4MDcwNzU3M2MxMTQ3ZGViZDIzODE5NmI4NDUzNDE5IjsKCSJvcmlnaW5hbC10cmFuc2FjdGlvbi1pZCIgPSAiNDkwMDAwMDY0NjExNzI4IjsKCSJidnJzIiA9ICIyLjAuMCI7CgkiYXBwLWl0ZW0taWQiID0gIjg2MzAzMDAzNSI7CgkidHJhbnNhY3Rpb24taWQiID0gIjQ5MDAwMDA2NDYxMTcyOCI7CgkicXVhbnRpdHkiID0gIjEiOwoJIm9yaWdpbmFsLXB1cmNoYXNlLWRhdGUtbXMiID0gIjE0MDk3NDI5Mzc5NTciOwoJInVuaXF1ZS12ZW5kb3ItaWRlbnRpZmllciIgPSAiMTVDMDZFNzQtOUUwRS00NUQ0LTg2MzQtQjU1NUU4NTJEQ0E0IjsKCSJpdGVtLWlkIiA9ICI4Nzk0MzEzMjAiOwoJInZlcnNpb24tZXh0ZXJuYWwtaWRlbnRpZmllciIgPSAiNjU3ODQyNjc5IjsKCSJwcm9kdWN0LWlkIiA9ICJma3NnXzMwcm1iXzMzMGdvbGQiOwoJInB1cmNoYXNlLWRhdGUiID0gIjIwMTQtMDktMDMgMTE6MTU6MzcgRXRjL0dNVCI7Cgkib3JpZ2luYWwtcHVyY2hhc2UtZGF0ZSIgPSAiMjAxNC0wOS0wMyAxMToxNTozNyBFdGMvR01UIjsKCSJiaWQiID0gImNvbS5lYS5wcm9kdWN0LmZhbmdrdWFpc2FuZ3VvIjsKCSJwdXJjaGFzZS1kYXRlLXBzdCIgPSAiMjAxNC0wOS0wMyAwNDoxNTozNyBBbWVyaWNhL0xvc19BbmdlbGVzIjsKfQ==\";\"pod\" = \"49\";\"signing-status\" = \"0\";}";
		System.out.println(str.getBytes().length);
	}
}
